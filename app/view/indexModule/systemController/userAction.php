<?php

echo '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">' . "\r\n" . '<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">' . "\r\n" . '<head>' . "\r\n" . '	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">' . "\r\n" . '	<title>用户管理</title>	' . "\r\n" . '	<script type="text/javascript" src="';
echo Zhimin::g('assets_uri');
echo 'js/jquery.min.js"></script>' . "\r\n" . '	<script type="text/javascript" src="';
echo Zhimin::g('assets_uri');
echo 'js/laydate/laydate.js"></script>' . "\r\n" . '	<script type="text/javascript" src="';
echo Zhimin::g('assets_uri');
echo 'js/layer/layer.js"></script>' . "\r\n" . '	<script type="text/javascript" src="';
echo Zhimin::g('assets_uri');
echo 'js/global.js"></script>' . "\r\n" . '	<!-- update at 20160905 by star -->' . "\r\n" . '	<script type="text/javascript" src="';
echo Zhimin::g('assets_uri');
echo 'js/user.js"></script>' . "\r\n" . '	<link rel="stylesheet" type="text/css" href="';
echo Zhimin::g('assets_uri');
echo 'style/reset.css" />' . "\r\n" . '	<link rel="stylesheet" type="text/css" href="';
echo Zhimin::g('assets_uri');
echo 'style/global.css" />' . "\r\n" . '	<link rel="stylesheet" type="text/css" href="';
echo Zhimin::g('assets_uri');
echo 'js/themes/default/easyui.css">' . "\r\n" . '	<link rel="stylesheet" type="text/css" href="';
echo Zhimin::g('assets_uri');
echo 'js/themes/icon.css">' . "\r\n" . '	<link rel="stylesheet" type="text/css" href="';
echo Zhimin::g('assets_uri');
echo 'style/re_easyui.css">' . "\r\n" . '	<script type="text/javascript" src="';
echo Zhimin::g('assets_uri');
echo 'js/jquery.easyui.min.js"></script>' . "\r\n" . '	<!--[if IE 7]>' . "\r\n" . '<style>' . "\r\n" . '.notice_top .close{position: absolute;top:18px;right:18px;float: right;margin-right:0; margin-top:0;display: inline-block;}' . "\r\n" . '.atten_top .close{line-height: normal;}' . "\r\n" . '</style>' . "\r\n" . '<![endif]-->' . "\r\n" . '</head>' . "\r\n" . '<body class="main_body">' . "\r\n" . '	<div class="detail">' . "\r\n" . '		';
include_once ('menu.php');
echo '		<div class="detail_top">' . "\r\n" . '			<img src="./images/main_detail_tbg.png" width="100%" alt="" />' . "\r\n" . '		</div>' . "\r\n" . '		<div class="detail_body">' . "\r\n" . '			<div class="tabel_box surpervision">' . "\r\n" . '				<form action="';
echo Zhimin::buildUrl();
echo '&action=search" method="post">' . "\r\n" . '					<div class="condition_top">' . "\r\n" . '						<div class="condition_240 condition_s">' . "\r\n" . '							<span class="condition_title">单位：</span>' . "\r\n" . '							<div class="select_200 select_div">' . "\r\n" . '								<input class="easyui-combotree" name="danwei" data-options="" style="width:100%;" id="easyui_search"/>' . "\r\n" . '							</div>' . "\r\n" . '						</div>' . "\r\n" . '						<div class="condition_165 condition_s">' . "\r\n" . '							<span class="condition_title">' . $_SESSION['zfz_type'] . '姓名：</span>' . "\r\n" . '							<div class="select_100 select_div select_in">' . "\r\n" . '								<input type="text" value="';
echo Zhimin::request('hostname');
echo '" name="hostname" />' . "\r\n" . '							</div>' . "\r\n" . '						</div>' . "\r\n" . '						<div class="condition_165 condition_s">' . "\r\n" . '							<span class="condition_title">' . $_SESSION['zfz_type'] . '编号：</span>' . "\r\n" . '							<div class="select_100 select_div select_in">' . "\r\n" . '								<input type="text" value="';
echo Zhimin::request('hostcode');
echo '" name="hostcode" />' . "\r\n" . '							</div>' . "\r\n" . '						</div>' . "\r\n" . '						<div class="condition_s sub">							' . "\r\n" . '							<input type="submit" value="" />' . "\r\n" . '						</div>' . "\r\n" . '						<div class="clear"></div>' . "\r\n" . '					</div>' . "\r\n" . '				</form>' . "\r\n" . '				<div class="action_div action_state">' . "\r\n" . '					<form action="';
echo Zhimin::buildUrl('user', 'system') . 'action=execl';
echo '" method="post" enctype="multipart/form-data">' . "\r\n" . '					';

if ($user_auth['add'] == 1) {
	echo '<span class="addlevel_s add on">添加新用户</span>';
}

if ($user_auth['edit'] == 1) {
	echo '<span class="addlevel_s edit_a">编辑</span>';
	echo '<span class="addlevel_s password_btn">重置密码</span>';
}

if ($user_auth['ok'] == 1) {
	echo '<span class="addlevel_s scope_btn">管理范围</span>';
}

if ($user_auth['edit'] == 1) {
	echo '<span class="addlevel_s stop_btn_s">停 用</span>';
	echo '<span class="addlevel_s up_btn_s">启 用</span>';
}

if ($user_auth['del'] == 1) {
	echo '<span class="addlevel_s action_del" id="user_del_but">删 除</span>';
}

if ($user_auth['admin'] == 1) {
	echo '<span class="addlevel_s on" id="excel_demo">模板下载</span>';
	echo '<span class="addlevel_s on" id="excel_input">导入</span>';
}

echo '					</form>' . "\r\n" . '				</div>' . "\r\n" . '				' . "\r\n" . '				<div class="table_height">			' . "\r\n" . '					<table class="table_detail">' . "\r\n" . '						<thead>' . "\r\n" . '							<tr>' . "\r\n" . '								<th class="t_back" width="6%">序号</th>' . "\r\n" . '								<th width="8%">' . $_SESSION['zfz_type'] . '姓名</th>' . "\r\n" . '								<th class="t_back" width="8%">' . $_SESSION['zfz_type'] . '编号</th>								' . "\r\n" . '								<th width="19%">单位</th>' . "\r\n" . '								<th class="t_back" width="11%">用户名</th>' . "\r\n" . '								<th width="9%">状态</th>' . "\r\n" . '								<th class="t_back" width="11%">角色</th>								' . "\r\n" . '								<th width="15%">上次登录时间</th>' . "\r\n" . '								<th class="t_back">上次登录IP</th>' . "\r\n" . '							</tr>' . "\r\n" . '						</thead>' . "\r\n" . '						<tbody class="tbody_atten">' . "\r\n" . '							<!-- 这里有两个效果，一个隔行换色td_back和紧急状态的颜色标注td_red -->' . "\r\n" . '							';

if (empty($datas)) {
	echo '							<tr class="td_back">' . "\r\n" . '								<td colspan="9">暂无记录</td>' . "\r\n" . '							</tr>' . "\r\n" . '							';
}
else {
	foreach ($datas as $k => $v ) {
		echo '							<tr date="';
		echo $v['id'];
		echo '" ';

		if (($k % 2) == 1) {
			echo 'class="td_back"';
		}

		echo '>' . "\r\n" . '								<td>' . "\r\n" . '									';
		echo $k + 1;
		echo '								</td>' . "\r\n" . '								<td>' . "\r\n" . '									';
		echo $v['realname'] == '' ? '--' : $v['realname'];
		echo '								</td>' . "\r\n" . '								<td>';
		echo $v['hostcode'];
		echo '</td>' . "\r\n" . '								<td>' . "\r\n" . '									';
		echo $v['unitname'];
		echo '								</td>' . "\r\n" . '								<td>';
		echo $v['username'];
		echo '</td>								' . "\r\n" . '								<td>';
		echo $v['ispass'] == 1 ? '正常' : '停用';
		echo '</td>								' . "\r\n" . '								<td>';
		echo $v['ifadmin'] == 1 ? '系统管理员' : $v['groupname'];
		echo '</td>								' . "\r\n" . '								<td>';
		echo empty($v['logintime']) ? '' : date('Y-m-d H:i', $v['logintime']);
		echo '</td>								' . "\r\n" . '								<td>';
		echo $v['loginip'];
		echo '</td>								' . "\r\n" . '							</tr>' . "\r\n" . '							';
	}
}

echo '					' . "\r\n" . '						</tbody>' . "\r\n" . '					</table>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="page_link">' . "\r\n" . '					';
$page_m = Zhimin::getComponent('page');
echo $page_m->show($page['base_url'] . '&page=', '', 15, $page['total'], $page['page'], 4);
echo '				</div>' . "\r\n" . '			</div>			' . "\r\n" . '		</div>' . "\r\n" . '		<div class="detail_foot">' . "\r\n" . '			<img src="./images/main_detail_fbg.png" width="100%" alt="" />' . "\r\n" . '		</div>		' . "\r\n" . '	</div>' . "\r\n" . '	<!-- 添加弹框 -->' . "\r\n" . '	<div class="layer_notice atten_add">' . "\r\n" . '		<div class="notice_top atten_top"><span style="display: inline-block;width:20px;"></span>添加<span class="close close_btn"><img src="./images/close.png" alt="" /></span></div>' . "\r\n" . '		<div class="notice_body">' . "\r\n" . '			<form action="';
echo Zhimin::buildUrl();
echo '&action=add" method="post" name="user_add_form" id="user_add_form">' . "\r\n" . '			<div class="con_atten_wrap recorder_notice">' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">用户名：</span>' . "\r\n" . '						<font class="sign_d sign_star">*</font>' . "\r\n" . '						<div class="select_260 select_div select_relative select_in">								' . "\r\n" . '							<input type="text"  class="input_error" name="username" value="" />' . "\r\n" . '							<span class="error_msg">请填写用户名</span>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">密码：</span>' . "\r\n" . '						<font class="sign_d sign_star">*</font>' . "\r\n" . '						<div class="select_260 select_div select_relative select_in">								' . "\r\n" . '							<input type="password" class="input_error" name="password1" value="" />' . "\r\n" . '							<span class="error_msg">请填写密码</span>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">确认密码：</span>' . "\r\n" . '						<font class="sign_d sign_star">*</font>' . "\r\n" . '						<div class="select_260 select_div select_relative select_in">								' . "\r\n" . '							<input type="password" class="input_error" name="password2" value="" />' . "\r\n" . '							<span class="error_msg">请填写确认密码</span>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">' . $_SESSION['zfz_type'] . '姓名：</span>' . "\r\n" . '						<font class="sign_d sign_star">*</font>' . "\r\n" . '						<div class="select_260 select_div select_relative select_in">								' . "\r\n" . '							<input type="text" class="input_error" name="realname" value="" />' . "\r\n" . '							<span class="error_msg">请填写' . $_SESSION['zfz_type'] . '姓名</span>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">' . $_SESSION['zfz_type'] . '编号：</span>' . "\r\n" . '						 <font class="sign_d sign_star sign_star1">*</font>' . "\r\n" . '						<div class="select_260 select_div select_relative select_in">								' . "\r\n" . '							<input type="text" class="input_error" name="hostcode" value="" />' . "\r\n" . '							<!-- <span class="error_msg">请选填写' . $_SESSION['zfz_type'] . '编号</span> -->' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">单位：</span>' . "\r\n" . '						<font class="sign_d sign_star">*</font>' . "\r\n" . '						<div class="select_260 select_div">' . "\r\n" . '							<input class="easyui-combotree" name="danwei_add" data-options="" style="width:100%;" id="easyui_add"/>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">角色：</span>' . "\r\n" . '						<font class="sign_d sign_star">*</font>' . "\r\n" . '						<div class="select_260 select_div">' . "\r\n" . '							<select class="easy_u" name="group" style="width:100%;">' . "\r\n" . '								<option value="">-请选择-</option>' . "\r\n" . '								';

foreach ($user_groups as $k => $v ) {
	echo '<option value="' . $v['bh'] . '"';
	echo '>' . $v['gname'] . '</option>';
}

echo '							</select>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">排序：</span>' . "\r\n" . '						<font class="sign_d sign_star sign_star1">&nbsp;</font>' . "\r\n" . '						<div class="select_260 select_div select_in select_config">								' . "\r\n" . '							<input type="text" name="sort" value="1" />' . "\r\n" . '							<div class="sign">' . "\r\n" . '								<span class="plus"></span>' . "\r\n" . '								<span class="minus"></span>' . "\r\n" . '							</div>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s ">' . "\r\n" . '						<font class="sign_d sign_star">&nbsp;</font>						' . "\r\n" . '						<div class="select_260 select_div select_in selec_text">' . "\r\n" . '							<span class="sure_add" id="add_submit">确 定</span>' . "\r\n" . '							<span class="sure_cancle close_btn">取 消</span>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '			</div>				' . "\r\n" . '			</form>' . "\r\n" . '		</div>' . "\r\n" . '		<div class="notice_foot"></div>' . "\r\n" . '	</div>' . "\r\n" . '	<!-- 修改密码弹框 -->' . "\r\n" . '	<div class="layer_notice password_change">' . "\r\n" . '		<div class="notice_top atten_top"><span style="display: inline-block;width:20px;"></span>修改密码<span class="close close_btn"><img src="./images/close.png" alt="" /></span></div>' . "\r\n" . '		<div class="notice_body" id="notice_user_body">' . "\r\n" . '			<form name="change_pwd_form" id="change_pwd_form">' . "\r\n" . '			<div class="con_atten_wrap recorder_notice">' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">用户名：</span>' . "\r\n" . '						<div class="select_260 select_div select_no" id="pwd_change_username"></div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">旧密码：</span>' . "\r\n" . '						<font class="sign_d sign_star">*</font>' . "\r\n" . '						<div class="select_260 select_div select_relative select_in">								' . "\r\n" . '							<input type="password" name="old_pwd" class="input_error" value="" />' . "\r\n" . '							<span class="error_msg">请选填写旧密码</span>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">新密码：</span>' . "\r\n" . '						<font class="sign_d sign_star">*</font>' . "\r\n" . '						<div class="select_260 select_div select_relative select_in">								' . "\r\n" . '							<input type="password" name="new_pwd" class="input_error" value="" />' . "\r\n" . '							<span class="error_msg">请选填写新密码</span>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">确认密码：</span>' . "\r\n" . '						<font class="sign_d sign_star">*</font>' . "\r\n" . '						<div class="select_260 select_div select_relative select_in">								' . "\r\n" . '							<input type="password" name="confim_pwd" class="input_error" value="" />' . "\r\n" . '							<span class="error_msg">请选填写确认密码</span>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s ">' . "\r\n" . '						<font class="sign_d sign_star">&nbsp;</font>						' . "\r\n" . '						<div class="select_260 select_div select_in selec_text">' . "\r\n" . '							<input type="hidden" name="user_id" id="pwd_change_id" value="" />' . "\r\n" . '							<span class="sure_add" id="change_pwd_submit">确 定</span>' . "\r\n" . '							<span class="sure_cancle close_btn">取 消</span>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '			</div>				' . "\r\n" . '			</form>' . "\r\n" . '		</div>' . "\r\n" . '		<div class="notice_foot"></div>' . "\r\n" . '	</div>' . "\r\n" . '	<!-- 确认提示框 -->' . "\r\n" . '	<div class="layer_notice lay_confirm_del">' . "\r\n" . '		<div class="notice_top"><span class="close close_btn"><img src="./images/close.png" alt="" /></span></div>' . "\r\n" . '		<div class="notice_body1">' . "\r\n" . '			<div class="n_left">' . "\r\n" . '				<img src="./images/del_bg.png">' . "\r\n" . '			</div>' . "\r\n" . '			<div class="n_right">' . "\r\n" . '				<p>确定删除此条记录？</p>' . "\r\n" . '				<div class="clear"></div>' . "\r\n" . '				<span class="sure_span sure_one_del">确 定</span>' . "\r\n" . '				<span class="cancle_span close_btn">取 消</span>' . "\r\n" . '			</div>' . "\r\n" . '		</div>' . "\r\n" . '		<div class="notice_foot"></div>' . "\r\n" . '	</div>' . "\r\n" . '		<!-- 确认提示框 -->' . "\r\n" . '	<div class="layer_notice lay_confirm_reset">' . "\r\n" . '		<div class="notice_top"><span class="close close_btn"><img src="./images/close.png" alt="" /></span></div>' . "\r\n" . '		<div class="notice_body1">' . "\r\n" . '			<div class="n_left">' . "\r\n" . '				<img src="./images/del_bg.png">' . "\r\n" . '			</div>' . "\r\n" . '			<div class="n_right">' . "\r\n" . '				<p>确定重置密码？</p>' . "\r\n" . '				<div class="clear"></div>' . "\r\n" . '				<span class="sure_span sure_one_reset">确 定</span>' . "\r\n" . '				<span class="cancle_span close_btn">取 消</span>' . "\r\n" . '			</div>' . "\r\n" . '		</div>' . "\r\n" . '		<div class="notice_foot"></div>' . "\r\n" . '	</div>' . "\r\n" . '	<!-- 成功提示框 -->' . "\r\n" . '	<div class="layer_notice lay_success">' . "\r\n" . '		<div class="notice_top"><span class="close close_btn"><img src="./images/close.png" alt="" /></span></div>' . "\r\n" . '		<div class="notice_body">' . "\r\n" . '			<div class="n_left">' . "\r\n" . '				<img src="./images/success_bg.png">' . "\r\n" . '			</div>' . "\r\n" . '			<div class="n_right">' . "\r\n" . '				<p id="success_flg">删除成功......<font>3</font>秒钟后返回页面！</p>' . "\r\n" . '				<div class="clear"></div>' . "\r\n" . '				<span class="cancle_span close_btn">确 定</span>' . "\r\n" . '			</div>' . "\r\n" . '		</div>' . "\r\n" . '		<div class="notice_foot"></div>' . "\r\n" . '	</div>' . "\r\n" . '	<!-- 失败提示框 -->' . "\r\n" . '	<div class="layer_notice lay_wrong">' . "\r\n" . '		<div class="notice_top"><span class="close close_btn"><img src="./images/close.png" alt="" /></span></div>' . "\r\n" . '		<div class="notice_body">' . "\r\n" . '			<div class="n_left">' . "\r\n" . '				<img src="./images/notice_bg.png">' . "\r\n" . '			</div>' . "\r\n" . '			<div class="n_right">' . "\r\n" . '				<p id="fail_flg">删除失败......<font>3</font>秒钟后返回页面！</p>' . "\r\n" . '				<div class="clear"></div>' . "\r\n" . '				<span class="cancle_span close_btn_self">确 定</span>' . "\r\n" . '			</div>' . "\r\n" . '		</div>' . "\r\n" . '		<div class="notice_foot"></div>' . "\r\n" . '	</div>' . "\r\n" . '	<!-- 停用确认提示框 -->' . "\r\n" . '	<div class="layer_notice lay_confirm_stop">' . "\r\n" . '		<div class="notice_top"><span class="close close_btn"><img src="./images/close.png" alt="" /></span></div>' . "\r\n" . '		<div class="notice_body1">' . "\r\n" . '			<div class="n_left">' . "\r\n" . '				<img src="./images/scrp.png">' . "\r\n" . '			</div>' . "\r\n" . '			<div class="n_right">' . "\r\n" . '				<p>确定停用？</p>' . "\r\n" . '				<div class="clear"></div>' . "\r\n" . '				<span class="sure_span stop_btn">确 定</span>' . "\r\n" . '				<span class="cancle_span close_btn">取 消</span>' . "\r\n" . '			</div>' . "\r\n" . '		</div>' . "\r\n" . '		<div class="notice_foot"></div>' . "\r\n" . '	</div>' . "\r\n" . '	<!-- 停用成功提示框 -->' . "\r\n" . '	<div class="layer_notice stop_success">' . "\r\n" . '		<div class="notice_top"><span class="close close_btn"><img src="./images/close.png" alt="" /></span></div>' . "\r\n" . '		<div class="notice_body">' . "\r\n" . '			<div class="n_left">' . "\r\n" . '				<img src="./images/success_bg.png">' . "\r\n" . '			</div>' . "\r\n" . '			<div class="n_right">' . "\r\n" . '				<p>停用成功......<font>3</font>秒钟后返回页面！</p>' . "\r\n" . '				<div class="clear"></div>' . "\r\n" . '				<span class="cancle_span close_btn">确 定</span>' . "\r\n" . '			</div>' . "\r\n" . '		</div>' . "\r\n" . '		<div class="notice_foot"></div>' . "\r\n" . '	</div>' . "\r\n" . '	<!-- 停用失败提示框 -->' . "\r\n" . '	<div class="layer_notice stop_wrong">' . "\r\n" . '		<div class="notice_top"><span class="close close_btn"><img src="./images/close.png" alt="" /></span></div>' . "\r\n" . '		<div class="notice_body">' . "\r\n" . '			<div class="n_left">' . "\r\n" . '				<img src="./images/notice_bg.png">' . "\r\n" . '			</div>' . "\r\n" . '			<div class="n_right">' . "\r\n" . '				<p>停用失败......<font>3</font>秒钟后返回页面！</p>' . "\r\n" . '				<div class="clear"></div>' . "\r\n" . '				<span class="cancle_span close_btn">确 定</span>' . "\r\n" . '			</div>' . "\r\n" . '		</div>' . "\r\n" . '		<div class="notice_foot"></div>' . "\r\n" . '	</div>' . "\r\n" . '	<!-- 启用确认提示框 -->' . "\r\n" . '	<div class="layer_notice lay_confirm_up">' . "\r\n" . '		<div class="notice_top"><span class="close close_btn"><img src="./images/close.png" alt="" /></span></div>' . "\r\n" . '		<div class="notice_body1">' . "\r\n" . '			<div class="n_left">' . "\r\n" . '				<img src="./images/confirm_bg.png">' . "\r\n" . '			</div>' . "\r\n" . '			<div class="n_right">' . "\r\n" . '				<p>确定启用？</p>' . "\r\n" . '				<div class="clear"></div>' . "\r\n" . '				<span class="sure_span up_btn">确 定</span>' . "\r\n" . '				<span class="cancle_span close_btn">取 消</span>' . "\r\n" . '			</div>' . "\r\n" . '		</div>' . "\r\n" . '		<div class="notice_foot"></div>' . "\r\n" . '	</div>' . "\r\n" . '	<!-- 启用成功提示框 -->' . "\r\n" . '	<div class="layer_notice up_success">' . "\r\n" . '		<div class="notice_top"><span class="close close_btn"><img src="./images/close.png" alt="" /></span></div>' . "\r\n" . '		<div class="notice_body">' . "\r\n" . '			<div class="n_left">' . "\r\n" . '				<img src="./images/success_bg.png">' . "\r\n" . '			</div>' . "\r\n" . '			<div class="n_right">' . "\r\n" . '				<p>启用成功......<font>3</font>秒钟后返回页面！</p>' . "\r\n" . '				<div class="clear"></div>' . "\r\n" . '				<span class="cancle_span close_btn">确 定</span>' . "\r\n" . '			</div>' . "\r\n" . '		</div>' . "\r\n" . '		<div class="notice_foot"></div>' . "\r\n" . '	</div>' . "\r\n" . '	<!-- 启用失败提示框 -->' . "\r\n" . '	<div class="layer_notice up_wrong">' . "\r\n" . '		<div class="notice_top"><span class="close close_btn"><img src="./images/close.png" alt="" /></span></div>' . "\r\n" . '		<div class="notice_body">' . "\r\n" . '			<div class="n_left">' . "\r\n" . '				<img src="./images/notice_bg.png">' . "\r\n" . '			</div>' . "\r\n" . '			<div class="n_right">' . "\r\n" . '				<p>启用失败......<font>3</font>秒钟后返回页面！</p>' . "\r\n" . '				<div class="clear"></div>' . "\r\n" . '				<span class="cancle_span close_btn">确 定</span>' . "\r\n" . '			</div>' . "\r\n" . '		</div>' . "\r\n" . '		<div class="notice_foot"></div>' . "\r\n" . '	</div>' . "\r\n" . '	<!-- 导入Excel提示框 -->' . "\r\n" . '	<div class="layer_notice input_form">' . "\r\n" . '		<div class="notice_top"><span class="close close_btn"><img src="./images/close.png" alt="" /></span></div>' . "\r\n" . '		<form action="';
echo Zhimin::buildUrl();
echo '&action=excel" method="post" enctype="multipart/form-data" name="excel_form" id="excel_form">' . "\r\n" . '		<div class="notice_body action_state">' . "\r\n" . '			<input type="file" name="inputExcel" />' . "\r\n" . '			<span class="addlevel_s on" id="excel_input_form">导入</span>' . "\r\n" . '		</div>' . "\r\n" . '		</form>' . "\r\n" . '		<div class="notice_foot"></div>' . "\r\n" . '	</div>' . "\r\n" . '	<!-- 编辑弹框 -->' . "\r\n" . '	<div class="layer_notice atten_edit">' . "\r\n" . '		<div class="notice_top atten_top"><span style="display: inline-block;width:20px;"></span>编辑<span class="close close_btn"><img src="./images/close.png" alt="" /></span></div>' . "\r\n" . '		<div class="notice_body">' . "\r\n" . '			<form action="';
echo Zhimin::buildUrl();
echo '&action=edit" method="post" name="user_edit_form" id="user_edit_form">' . "\r\n" . '			<div class="con_atten_wrap recorder_notice">' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">用户名：</span>' . "\r\n" . '						<font class="sign_d sign_star1">*</font>' . "\r\n" . '						<div class="select_260 select_div select_relative select_in selec_text">								' . "\r\n" . '							 <p id="edit_username"></p>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">' . $_SESSION['zfz_type'] . '姓名：</span>' . "\r\n" . '						<font class="sign_d sign_star">*</font>' . "\r\n" . '						<div class="select_260 select_div select_relative select_in">								' . "\r\n" . '							 <input type="text" class="input_error input_error1" name="realname" id="edit_realname" value="" />' . "\r\n" . '							<span class="error_msg">请选填写' . $_SESSION['zfz_type'] . '姓名</span>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">' . $_SESSION['zfz_type'] . '编号：</span>' . "\r\n" . '						<font class="sign_d sign_star">*</font>' . "\r\n" . '						<div class="select_260 select_div select_relative select_in">								' . "\r\n" . '							 <input type="text" class="input_error1" name="hostcode" id="edit_hostcode" value="" />' . "\r\n" . '							<span class="error_msg">请选填写' . $_SESSION['zfz_type'] . '编号</span>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">单位：</span>' . "\r\n" . '						<font class="sign_d sign_star">*</font>' . "\r\n" . '						<div class="select_260 select_div">' . "\r\n" . '							<input class="easyui-combotree" name="danwei_edit" data-options="" style="width:100%;" id="easyui_edit"/>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">角色：</span>' . "\r\n" . '						<font class="sign_d sign_star">*</font>' . "\r\n" . '						<div class="select_260 select_div">' . "\r\n" . '							<select class="easy_u" name="group" id="edit_group" style="width:100%;">' . "\r\n" . '								<option value="">-请选择-</option>' . "\r\n" . '								';

foreach ($user_groups as $k => $v ) {
	echo '<option value="' . $v['bh'] . '"';
	echo '>' . $v['gname'] . '</option>';
}

echo '							</select>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s">' . "\r\n" . '						<span class="condition_title">排序：</span>' . "\r\n" . '                        <font class="sign_d sign_star1">*</font>' . "\r\n" . '						<div class="select_260 select_div select_in select_config">	' . "\r\n" . '							<input type="text" name="sort" value="" id="edit_sort"/>' . "\r\n" . '							<div class="sign">' . "\r\n" . '								<span class="plus"></span>' . "\r\n" . '								<span class="minus"></span>' . "\r\n" . '							</div>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<div class="condition_345 condition_s ">' . "\r\n" . '						<font class="sign_d sign_star1">*</font>						' . "\r\n" . '						<div class="select_260 select_div select_in selec_text">' . "\r\n" . '							<input type="hidden" name="saveflag" value="1" />' . "\r\n" . '                        	<input type="hidden" name="id" id="edit_id" value="" />' . "\r\n" . '							<span class="sure_add" id="edit_submit">确 定</span>' . "\r\n" . '							<span class="sure_cancle close_btn">取 消</span>' . "\r\n" . '						</div>' . "\r\n" . '					</div>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>' . "\r\n" . '			</div>				' . "\r\n" . '			</form>' . "\r\n" . '		</div>' . "\r\n" . '		<div class="notice_foot"></div>' . "\r\n" . '	</div>' . "\r\n" . '	<!-- 管理范围弹框 -->' . "\r\n" . '	<div class="layer_notice scope">' . "\r\n" . '		<div class="notice_top atten_top"><span style="display: inline-block;width:20px;"></span>设置管理范围<span class="close close_btn"><img src="./images/close.png" alt="" /></span></div>' . "\r\n" . '		<div class="notice_body scope_body">' . "\r\n" . '			<form method="post" name="manager_edit_form" id="manager_edit_form">' . "\r\n" . '			<div class="con_atten_wrap scope_wrap">				' . "\r\n" . '				<div class="condition_top">' . "\r\n" . '					<ul class="ul_band" id="manager_unit_ul">' . "\r\n" . '					';
$optionsStr = '';
HTMLUtils::options_stair_userpage($optionsStr, $units_array, 'id', 'text', 'children', $manager_array);
echo $optionsStr;
echo '					</ul>' . "\r\n" . '					<div class="clear"></div>' . "\r\n" . '				</div>				' . "\r\n" . '			</div>' . "\r\n" . '			<div class="condition_top">' . "\r\n" . '				<div class="condition_345 condition_s ">						' . "\r\n" . '					<div class="select_260 select_div select_in selec_text">' . "\r\n" . '						<input type="hidden" name="saveflag" value="1" />' . "\r\n" . '						<input type="hidden" name="id" id="manager_unit_id" value="99" />' . "\r\n" . '						<span class="sure_add" id="manager_submit">确 定</span>' . "\r\n" . '						<span class="sure_cancle close_btn">取 消</span>' . "\r\n" . '					</div>' . "\r\n" . '				</div>' . "\r\n" . '				<div class="clear"></div>' . "\r\n" . '			</div>				' . "\r\n" . '			</form>' . "\r\n" . '		</div>' . "\r\n" . '		<div class="notice_foot"></div>' . "\r\n" . '	</div>' . "\r\n" . '<script type="text/javascript">' . "\r\n" . '$(document).ready(function(){' . "\r\n" . '	/*search list tree*/' . "\r\n" . '	$("#easyui_search").combotree({url:\'';
echo Zhimin::buildUrl('unitjson', 'other') . '&id=bh&text=dname';
echo '\',method:\'get\',labelPosition:\'top\',panelWidth:\'500px\',' . "\r\n" . '	// 设置选中项' . "\r\n" . '	onLoadSuccess:function(node,data){' . "\r\n" . '		$("#easyui_search").combotree(\'setValues\', [\'';
echo Zhimin::request('danwei');
echo '\']);  ' . "\r\n" . '    }  ' . "\r\n" . '	});  /*search list tree end*/ ' . "\r\n" . '	/*add tree*/' . "\r\n" . '	$("#easyui_add").combotree({url:\'';
echo Zhimin::buildUrl('unitjson', 'other') . '&id=bh&text=dname';
echo '\',method:\'get\',labelPosition:\'top\',panelWidth:\'500px\',' . "\r\n" . '	// 设置选中项' . "\r\n" . '	onLoadSuccess:function(node,data){' . "\r\n" . '		$("#easyui_add").combotree(\'setValues\', [\'\']);  ' . "\r\n" . '    }  ' . "\r\n" . '	});/*add tree end*/' . "\r\n" . '	$(\'.easy_u\').combobox({panelHeight:\'120px\',selectOnNavigation:true,editable:false,labelPosition:\'top\'});' . "\r\n" . '	//管理范围里面的样式' . "\r\n" . '	$(".ul_band li:not(\'.li_child\')").children("span").css("background","url(\'./images/icon_select02.png\') scroll 0 8px no-repeat");' . "\r\n" . '})' . "\r\n" . '</script>' . "\r\n" . '</body>' . "\r\n" . '</html>';

?>
